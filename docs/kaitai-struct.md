# Kaitai Struct

Kaitai Struct is a set of data-interfacing tools which can generate code in several languages, based on a description of the data structure (a "Kaitai Struct" YAML file with its own extension for differentiation). Documentation and download instructions are available [here](http://kaitai.io)

Available Kaitai Struct tools include:

* [Kaitai-Struct-Compiler](http://kaitai.io/#download): The compiler performs the heavy lifting and generates the source code associated with your format. It takes a user-created  .ksy file and creates the code (in a language specified by the user) for interacting with the binary data.

* [Kaitai Stream API](http://doc.kaitai.io/stream_api.html): These libraries allow Kaitai to interface with various languages in order to generate the necessary code in the desired target language. (Available as [kaitai-io github repositories](https://github.com/kaitai-io?utf8=âœ“&q=runtime)).

* [Kaitai-Struct-Visualizer](https://github.com/kaitai-io/kaitai_struct_visualizer): The visualizer is installed as a ruby gem (and as such requires a Ruby interpreter on your machine) and is primarily used as a debugging tool for your data descriptor. It takes a binary file and your .ksy file as inputs and creates an interactive visual representation of the format.

### Contents

* `simple_example/`
  A directory containing a simplified guide to using Kaitai Struct to interface with binary data. Includes pre-written example code and instructions to generate code with ksc (kaitai-struct-compiler).

* `ksy/`
  A directory containing various sample kaitai struct descriptions

  - `animal.ksy`
  A simplified data structure with some basic information about animals (species, age, and weight). Used in the `simple_example` 

  - `scdms.ksy` and `midas.ksy`
  The ksy/scdms.ksy and ksy/midas.ksy files are an example of how to declare a more complicated custom binary format. These demonstrate a number of the capabilities of Kaitai Struct including the ability to parse packed integer values, enumerated values, and conditional statements. Additionally it demonstrates the ability to import formats described in other files since the actual data is contained in the scdms.ksy format which is then encapsulated within the midas.ksy structure.  
 Note: an example program for these have not yet been written, but you can find some `scdms_raw.bin` data in `<dataReaderWriter>/data`. Test your Kaitai knowledge by writing up a basic program similar to the `simple_example`!

* `kaitai-stream-cpp-runtime`
  This directory contains kaitai-struct's C++ runtime library, and was taken from [kaitai_struct_cpp_stl_runtime](https://github.com/kaitai-io/kaitai_struct_cpp_stl_runtime/tree/72dd2d44b53d35b8c7b493c9000d315eb6f9ff1d). This code allows Kaitai to interface with standard C++ stream libraries **and are required** to correctly compile and execute your program (this directory is symlinked from `simple_example/src/kaitai` for reference).


### Additional Info

  * See the [Kaitai Struct User Guide](https://doc.kaitai.io/user_guide.html) for more detailed documentation on Kaitai Struct and its usage.

  * Kaitai also has an interactive [webIDE](https://ide.kaitai.io/) with examples of many popular data/file formats. You can also import your own .ksy schema format and corresponding data file into the tool.

  * The [Kaitai Stream API](http://doc.kaitai.io/stream_api.html) is a critical piece of the puzzle if you're actually trying to incorporate the code generated by Kaitai into a project. These runtime libraries exist for all languages supported by Kaitai and are essentially a wrapper around the languages native I/O libraries. For compiled languages and depending on your compilation environment you may need to include the appropriate header file in your generated code. For example, in C++ you will need to add a line reading `#include kaitaistream.h` to the header file you generated for your format. Interpreted languages such as Python and Ruby require the installation of the kaitaistream package.
